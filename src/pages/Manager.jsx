import { useMemo,useState } from 'react'; import { useToast } from '../components/Toasts.jsx'; const initial=[{id:1,name:'Operaio A',role:'Elettricista',hse:'OK'},{id:2,name:'Operaio B',role:'Montatore',hse:'KO'},{id:3,name:'Operaio C',role:'Cucito',hse:'OK'},]; export default function Manager(){ const toast=useToast(); const [q,setQ]=useState(''); const [sel,setSel]=useState(new Set()); const list=useMemo(()=>initial.filter(x=>x.name.toLowerCase().includes(q.toLowerCase())),[q]); function toggle(id){ setSel(prev=>{ const n=new Set(prev); n.has(id)?n.delete(id):n.add(id); return n }) } function assegnaMass(){ toast.push({type:'success',message:`${sel.size} operai assegnati`}); setSel(new Set()) } return (<main className='mx-auto max-w-6xl px-4 py-8'><div className='flex items-end justify-between gap-4'><div><h2 className='text-2xl font-semibold'>Nuvola Operai</h2><p className='text-white/60 text-sm'>Ricerca, HSE, selezione multipla, assegnazione massiva.</p></div><div className='text-sm text-white/60'>Capacità: {list.length}/20</div></div><div className='mt-4 flex gap-3'><input value={q} onChange={e=>setQ(e.target.value)} placeholder='Cerca operaio…' className='flex-1 bg-core-card rounded-lg px-3 py-2'/><button onClick={assegnaMass} disabled={!sel.size} className='rounded-lg bg-white/10 px-3 py-2 hover:bg-white/15 text-sm disabled:opacity-40'>Assegna (mass)</button></div><div className='mt-6 grid sm:grid-cols-2 lg:grid-cols-3 gap-4'>{list.map(x=>{ const selected=sel.has(x.id); return (<button type='button' key={x.id} onClick={()=>toggle(x.id)} className={'text-left rounded-2xl p-4 shadow-e1 transition '+(selected?'bg-core-violet/30':'bg-core-card hover:bg-core-card/90')}><div className='font-medium'>{x.name}</div><div className='text-sm text-white/70'>{x.role}</div><div className={'mt-2 inline-flex items-center gap-2 text-xs px-2 py-1 rounded '+(x.hse==='OK'?'bg-core-success/20':'bg-core-danger/20')}>HSE: {x.hse}</div></button>) })}</div></main>) }
